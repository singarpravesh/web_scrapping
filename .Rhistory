remDr <- rD[["client"]]
remDr$navigate(urls[i])
html_page_main <- remDr$getPageSource()[[1]]
Top_facilities[i] <- read_html(html_page_main) |>
html_nodes('div[class="UniquesFacilities__xidFacilitiesCard"]') %>%
html_text()
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement() %>%
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text()
remDr$closeWindow()
remove(html_page_main)
remove(html_page)
remove(rD)
remove(remDr)
}
remDr$closeWindow()
remove(html_page_main)
remove(html_page)
remove(rD)
remove(remDr)
Top_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
html_page_main <- remDr$getPageSource()[[1]]
Top_facilities[i] <- read_html(html_page_main) |>
html_nodes('div[class="UniquesFacilities__xidFacilitiesCard"]') %>%
html_text()
remDr$closeWindow()
remove(html_page_main)
remove(html_page)
remove(rD)
remove(remDr)
}
Top_facilities
Top_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
html_page_main <- remDr$getPageSource()[[1]]
Top_facilities[i] <- read_html(html_page_main) |>
html_nodes('div[class="UniquesFacilities__xidFacilitiesCard"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page_main)
remove(rD)
remove(remDr)
}
Top_facilities
Other_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
Other_facilities <- list()
remove(html_page)
remove(rD)
remove(remDr)
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
Other_facilities
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
Other_facilities
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$findElement(using = "css", value = "#selectedTab")$clickElement()
remDr$findElement(using = "id", value = "#selectedTab")$clickElement()
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
Other_facilities <- list()
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,document.body.scrollHeight);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
Other_facilities <- list()
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$buttondown()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
Other_facilities <- list()
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
remove(html_page)
remove(rD)
remove(remDr)
}
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$buttondown()
remDr$executeScript("window.scrollTo(0,400);")
remDr$executeScript("window.scrollTo(0,800);")
remDr$executeScript("window.scrollTo(0,800);")
remDr$executeScript("window.scrollTo(0,1000);")
remDr$executeScript("window.scrollTo(0,2000);")
remDr$executeScript("window.scrollTo(0,1500);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
Other_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$buttondown()
remDr$executeScript("window.scrollTo(0,1500);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$buttondown()
remDr$executeScript("window.scrollTo(0,1500);")
Sys.sleep(1)
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,1500);")
remDr$findElement(using = "css", value = "UniquesFacilities__pageHeadingWrapper")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
remove(html_page)
remove(rD)
remove(remDr)
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,1500);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
?remDr$findElement()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[1])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,1500);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$findElements(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
remDr$executeScript("window.scrollTo(0,1400);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
Other_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,1400);")
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(2))
driver.manage()$timeouts()$implicitlyWait(Duration.ofSeconds(2))
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
Other_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,1400);")
remDr$setTimeout(type = "implicit", milliseconds = 2000)
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
Other_facilities <- list()
remove(html_page)
remove(rD)
remove(remDr)
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
remDr$executeScript("window.scrollTo(0,1400);")
remDr$setTimeout(type = "implicit", milliseconds = 2000)
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page)
remove(rD)
remove(remDr)
}
Other_facilities
Top_facilities <- list()
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
html_page_main <- remDr$getPageSource()[[1]]
Top_facilities[i] <- read_html(html_page_main) |>
html_nodes('div[class="UniquesFacilities__xidFacilitiesCard"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html_page_main)
remove(rD)
remove(remDr)
}
library(RSelenium)
library(dplyr)
library(rvest)
library(jsonlite)
library(readr)
# Initalise the variables
Price <- c()
# Structural variables
Bhk <- c() # No of rooms (1,2,3,4)
Area_sqft <- c()
# Locational variables
Latitude <- c()
Longitude <- c()
Top_facilities <- list()
Other_facilities <- list()
# Scrap the data in page 1
for (i in 1:2){
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
remDr <- rD[["client"]]
remDr$navigate(urls[i])
remDr$findElement(using = "css", value = ".ReraDisclaimer__topDisclaimer > div:nth-child(1) > div:nth-child(2) > button:nth-child(1)")$clickElement()
Price[i] <- remDr$findElements(using = "xpath", "//*[@class='list_header_semiBold configurationCards__configurationCardsHeading']") |>
sapply(function(x){x$getElementText()[[1]]})
Bhk[i] <- remDr$findElements(using = "xpath", "//*[@class='ellipsis list_header_semiBold configurationCards__configurationCardsSubHeading']") |>
sapply(function(x){x$getElementText()[[1]]})
Area_sqft[i] <- remDr$findElements(using = "xpath", "//*[@class='caption_subdued_medium configurationCards__cardAreaSubHeadingOne']") |>
sapply(function(x){x$getElementText()[[1]]})
html <- remDr$getPageSource()[[1]]
json_ld_script <- read_html(html) |>
html_nodes('script[type="application/ld+json"]')
json_ld_data <- lapply(json_ld_script, function(x) {
json_str <- html_text(x)
fromJSON(json_str)
})
Latitude[i] <- json_ld_data[[3]]$geo$latitude
Longitude[i] <- json_ld_data[[3]]$geo$longitude
Top_facilities[i] <- read_html(html) |>
html_nodes('div[class="UniquesFacilities__xidFacilitiesCard"]') %>%
html_text() %>% list()
remDr$executeScript("window.scrollTo(0,1400);")
remDr$setTimeout(type = "implicit", milliseconds = 2000)
remDr$findElement(using = "css", value = ".UniquesFacilities__pageHeadingWrapper > a:nth-child(2)")$clickElement()
html_page <- remDr$getPageSource()[[1]]
Other_facilities[i] <- read_html(html_page) |>
html_nodes('div[class="body_med"]') %>%
html_text() %>% list()
remDr$closeWindow()
remove(html)
remove(json_ld_data)
remove(json_ld_script)
remove(rD)
remove(remDr)
remove(html_page)
}
Area_sqft
Bhk
Latitude
Longitude
Top_facilities
Other_facilities
house_data <- tibble(price = Price,
bhk = Bhk,
area_sqft = Area_sqft,
top_facilities = Top_facilities,
other_facilities = Other_facilities,
latitude = round(as.numeric(Latitude), 8),
longitude = round(as.numeric(Longitude), 8)) |>
tidyr::separate_wider_delim(cols = price, delim = "-",
names = c("price_min", "price_max"))
house_data
house_data <- tibble(price = Price,
bhk = Bhk,
area_sqft = Area_sqft,
top_facilities = unlist(Top_facilities),
other_facilities = Other_facilities,
latitude = round(as.numeric(Latitude), 8),
longitude = round(as.numeric(Longitude), 8)) |>
tidyr::separate_wider_delim(cols = price, delim = "-",
names = c("price_min", "price_max"))
house_data
urls
rD <- rsDriver(browser="firefox",chromever = NULL, port=netstat::free_port(), verbose=F)
